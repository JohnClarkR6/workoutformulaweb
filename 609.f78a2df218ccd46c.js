"use strict";(self.webpackChunkWorkoutFormulaWeb=self.webpackChunkWorkoutFormulaWeb||[]).push([[609],{2609:(I,p,c)=>{c.r(p),c.d(p,{HomeModule:()=>E});var f=c(95),d=c(6814),l=c(2253),e=c(4946),v=c(3076),g=c(5619),k=c(9397),S=c(7398),x=c(6306),N=c(8504),J=c(9862);let w=(()=>{class i{constructor(t,r){this.http=t,this.userService=r,this.routineUrl="https://shogunremakeapi.azurewebsites.net/api/routines",this.workoutUrl="https://shogunremakeapi.azurewebsites.net/api/workouts",this._currentProgram=new g.X(null),this.currentProgram=this._currentProgram.asObservable(),this._viewProgram=new g.X(null),this.viewProgram=this._viewProgram.asObservable(),this._calendarWorkouts=new g.X(null),this.calendarWorkouts=this._calendarWorkouts.asObservable(),this._currentWeekWorkouts=new g.X(null),this.currentWeekWorkouts=this._currentWeekWorkouts.asObservable(),this._currentProgramGeneratedWorkouts=new g.X([]),this.currentProgramGeneratedWorkouts=this._currentProgramGeneratedWorkouts.asObservable()}getCurrentProgram(t){return this.http.get(`${this.routineUrl}/currentRoutine/${t}`).pipe((0,k.b)(r=>this.parseJSON(r.routine)),(0,S.U)(r=>(r.calendarWorkouts=r.calendarWorkouts.map(o=>({...o,workoutOverviewJSON:o.workoutOverviewJSON?JSON.parse(o.workoutOverviewJSON):o.workoutOverviewJSON})),r)),(0,x.K)(r=>(console.log(r),(0,N._)(r)))).subscribe({next:r=>{this._calendarWorkouts.next(r.calendarWorkouts),this._currentWeekWorkouts.next(r.currentWeekWorkouts)},error:r=>{}})}parseJSON(t){try{t.initialExercisesJSON&&(t.initialExercisesJSON=JSON.parse(t.initialExercisesJSON)),t.multipliersJSON&&(t.multipliersJSON=JSON.parse(t.multipliersJSON),t.multipliersJSON.sort((r,o)=>r.setMultipliers.length<o.setMultipliers.length?1:r.setMultipliers.length>o.setMultipliers.length?-1:0)),t.programCompletionJSON&&(t.programCompletionJSON=JSON.parse(t.programCompletionJSON)),t.programOverviewJSON&&(t.programOverviewJSON=JSON.parse(t.programOverviewJSON)),t.nextBlockJSON&&(t.nextBlockJSON=JSON.parse(t.nextBlockJSON)),t.nextMesoJSON&&(t.nextMesoJSON=JSON.parse(t.nextMesoJSON)),t.deloadJSON&&(t.deloadJSON=JSON.parse(t.deloadJSON)),t.whatToExpectJSON&&(t.whatToExpectJSON=JSON.parse(t.whatToExpectJSON)),t.workouts.forEach(r=>{r.workoutOverviewJSON&&(r.workoutOverviewJSON=JSON.parse(r.workoutOverviewJSON))})}catch(r){console.error("eror",r)}this._currentProgram.next(t)}createAdminProgram(t){return this.http.post(this.routineUrl,t).subscribe(r=>{this._currentProgram.next(r)},r=>{console.log("Error creating program",r)},()=>{})}saveProgramWorkout(t,r){return this.http.post(this.workoutUrl,t).subscribe(o=>{this.getProgram(r,!1)},o=>{console.log(t)})}updateJSONProgram(t,r){return console.log("Updating JSON"),this.http.put(this.routineUrl+"/"+t+"/json",r).subscribe(o=>{this._currentProgram.next(o)})}getProgram(t,r){return console.log("Getting Program"),this.http.get(this.routineUrl+"/"+t).subscribe(o=>{o.initialExercisesJSON=JSON.parse(o.initialExercisesJSON),o.multipliersJSON=JSON.parse(o.multipliersJSON),o.multipliersJSON.sort((n,s)=>n.setMultipliers.length<s.setMultipliers.length?1:n.setMultipliers.length>s.setMultipliers.length?-1:0),o.nextBlockJSON=JSON.parse(o.nextBlockJSON),o.nextMesoJSON=JSON.parse(o.nextMesoJSON),o.deloadJSON=JSON.parse(o.deloadJSON),r?this._viewProgram.next(o):this._currentProgram.next(o)})}getProgramNoSetsSegments(t){return this.http.get(this.routineUrl+"/current-program/"+t).subscribe(r=>{this._currentProgram.next(r)})}getGeneratedProgramWorkout(t,r,o){var a=this._currentProgramGeneratedWorkouts.getValue().filter(h=>h.week==r&&h.day==o)[0];return console.log("test from service",a),a}updateRoutineDetails(t,r){return this.http.put(this.routineUrl+"/details/"+r,t)}getRoutineInformation(t){return this.http.get(this.routineUrl+"/routineInfo/"+t)}setProgramsInfoJSON(t,r){this.updateProgramJSON({JSONstring:t},"whatToExpect",r)}updateProgramJSON(t,r,o){return this.http.put(this.routineUrl+"/"+o+"/"+r,t).subscribe(n=>{console.log("Updated")},n=>{console.log(n)})}getProgramsExerciseJSON(){return this._currentProgram.getValue().initialExercisesJSON}getProgramsMultipliersJSON(){return this._currentProgram.getValue().multipliersJSON}setProgramsMultipliersJSON(t){var r=this._currentProgram.getValue();r.multipliersJSON=JSON.parse(t),this._currentProgram.next(r),this.updateProgramJSON({JSONstring:t},"multipliers",r.id)}setProgramsDeloadWeekJSON(t){var r=this._currentProgram.getValue();r.deloadJSON=JSON.parse(t),this._currentProgram.next(r),this.updateProgramJSON({JSONstring:t},"deload",r.id)}setProgramsNextBlockJSON(t){var r=this._currentProgram.getValue();r.nextBlockJSON=JSON.parse(t),this._currentProgram.next(r),this.updateProgramJSON({JSONstring:t},"nextblock",r.id)}setProgramsNextMesoJSON(t){var r=this._currentProgram.getValue();r.nextMesoJSON=JSON.parse(t),this._currentProgram.next(r),this.updateProgramJSON({JSONstring:t},"nextMesocycle",r.id)}setProgramsExerciseJSON(t){var r=this._currentProgram.getValue();r.initialExercisesJSON=JSON.parse(t),this._currentProgram.next(r),this.updateProgramJSON({JSONstring:t},"exercises",r.id)}static#t=this.\u0275fac=function(r){return new(r||i)(e.LFG(J.eN),e.LFG(v.K))};static#e=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function _(i,u){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&i){const t=u.$implicit;e.xp6(1),e.Oqu(t)}}const y=function(i,u,t,r){return{"highlighted-date":i,today:u,otherMonth:t,selected:r,day:!0}};function P(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){const o=e.CHM(t),n=o.$implicit,s=o.index,a=e.oxw(2);return e.KtG(a.showWorkout(n.year,n.month,n.date,s))}),e._uU(1),e.qZA()}if(2&i){const t=u.$implicit,r=e.oxw(2);e.Q6J("ngClass",e.l5B(2,y,r.isDateInDb(t.year,t.month,t.date),r.isToday(t),t.otherMonth,t.selected)),e.xp6(1),e.hij(" ",t.date," ")}}function C(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.editWorkout(n.id))}),e.TgZ(1,"div",21),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e._uU(4,"\uf054"),e.qZA(),e.TgZ(5,"div",23),e._uU(6),e.ALo(7,"date"),e.qZA()()}if(2&i){const t=u.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(4),e.Oqu(e.xi3(7,2,t.date,"fullDate"))}}function b(i,u){if(1&i&&(e.TgZ(0,"div",18),e.YNc(1,C,8,5,"div",19),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.selectedWorkout)}}const M=function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]};function T(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._uU(3,"Workout Schedule"),e.qZA(),e.TgZ(4,"div",4),e._uU(5,"i"),e.qZA(),e.TgZ(6,"div",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.prevMonth())}),e._UZ(7,"i",6),e.qZA(),e.TgZ(8,"div",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.test())}),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.nextMonth())}),e._UZ(11,"i",9),e.qZA()(),e.TgZ(12,"div",10)(13,"div",11),e.YNc(14,_,2,1,"div",12),e.qZA(),e.TgZ(15,"div",13),e.YNc(16,P,2,7,"div",14),e.qZA()(),e.YNc(17,b,2,1,"div",15),e.qZA()}if(2&i){const t=e.oxw();e.xp6(9),e.hij(" ",t.getMonthAndYear()," "),e.xp6(5),e.Q6J("ngForOf",e.DdM(4,M)),e.xp6(2),e.Q6J("ngForOf",t.days),e.xp6(1),e.Q6J("ngIf",t.selectedWorkout.length>0)}}let O=(()=>{class i{constructor(t,r,o,n){this.userService=t,this.routineService=r,this.router=o,this.route=n,this.isLoading=!1,this.selectedWorkout=[],this.workouts=[],this.days=[],this.today=new Date,this.datesFromDb=[],this.upcommingWorkouts=[];const s=new Date;this.month=s.getMonth(),this.year=s.getFullYear(),this.updateDays()}ngOnInit(){this.userService.currentUser.subscribe(t=>{this.userSettings=t,!t.stillCreatingRoutine&&t.routineId&&(this.routineService.getCurrentProgram(this.userSettings.routineId),this.getCalendarWorkouts())})}test(){console.log("test")}onTap(){}getCalendarWorkouts(){this.routineService.calendarWorkouts.subscribe(t=>{this.workouts=t,this.datesFromDb=t.map(s=>new Date(s.date)),this.workouts.filter(s=>!1===s.completed);let o=new Date;o.setHours(0,0,0,0),this.datesFromDb.findIndex(s=>(s.setHours(0,0,0,0),s.getTime()===o.getTime()))})}showWorkout(t,r,o,n){this.currentSelectedIndex?(this.days[this.currentSelectedIndex].selected=!1,this.days[n].selected=!0):this.days[n].selected=!0,this.currentSelectedIndex=n;const s=new Date(t,r,o);s.setHours(0,0,0,0);let a=this.datesFromDb.findIndex(h=>(h.setHours(0,0,0,0),h.getTime()===s.getTime()));(a||0==a)&&this.selectedWorkout.splice(0,1,this.workouts[a]),-1==a&&(this.selectedWorkout=[])}editWorkout(t){this.router.navigate(["../workout/new-workout"],{queryParams:{workoutId:t,isEditing:!0,finishedProgram:!0,creatingProgram:!1}})}onCreateNew(t){this.router.navigate(["current-routine"],{relativeTo:this.route,queryParams:{id:this.userSettings.routineId,info:t}})}updateDays(){const t=new Date(this.year,this.month,1).getDay(),r=new Date(this.year,this.month+1,0).getDate(),o=new Date(this.year,this.month,0).getDate();this.days=[];for(let a=0;a<t;a++)this.days.push({date:o-t+a+1,month:0===this.month?11:this.month-1,year:0===this.month?this.year-1:this.year,row:0,col:a,otherMonth:!0,selected:!1});for(let a=0;a<r;a++)this.days.push({date:a+1,month:this.month,year:this.year,row:Math.floor((t+a)/7),col:(t+a)%7,otherMonth:!1,selected:!1});let s=1;for(let a=this.days[this.days.length-1].col+1;a<7;a++)this.days.push({date:s++,month:11===this.month?0:this.month+1,year:11===this.month?this.year+1:this.year,row:this.days[this.days.length-1].row,col:a,otherMonth:!0,selected:!1})}nextMonth(){this.month++,this.month>11&&(this.month=0,this.year++),this.updateDays()}prevMonth(){this.month--,this.month<0&&(this.month=11,this.year--),this.updateDays()}getMonthAndYear(){return`${["January","February","March","April","May","June","July","August","September","October","November","December"][this.month]} ${this.year}`}isToday(t){return t.date===this.today.getDate()&&t.month===this.today.getMonth()&&t.year===this.today.getFullYear()}isDateInDb(t,r,o){if(this.datesFromDb){let n=new Date;const s=new Date(t,r,o),a=Date.UTC(t,r,o);return(s.getFullYear()!==n.getFullYear()||s.getMonth()!==n.getMonth()||s.getDate()!==n.getDate())&&this.datesFromDb.map(m=>Date.UTC(m.getFullYear(),m.getMonth(),m.getDate())).includes(a)}return!1}static#t=this.\u0275fac=function(r){return new(r||i)(e.Y36(v.K),e.Y36(w),e.Y36(l.F0),e.Y36(l.gz))};static#e=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-routine-check"]],decls:1,vars:1,consts:[["class","block-grid","style","margin-top: 50px; margin: 50px;",4,"ngIf"],[1,"block-grid",2,"margin-top","50px","margin","50px"],[2,"display","grid","grid-template-rows","1fr 1fr","grid-template-columns","50px 1fr 50px"],[1,"heading",2,"grid-row","1","grid-column","1 / span 2"],[1,"heading-circle",2,"grid-row","1","grid-column","3 / span 2"],[1,"h2",2,"grid-row","2","grid-column","1",3,"click"],[1,"fas","fa-arrow-left"],[1,"h2",2,"grid-row","2","grid-column","2","display","flex","align-items","center","justify-content","center",3,"click"],[1,"h2",2,"grid-row","2","grid-column","3",3,"click"],[1,"fas","fa-arrow-right"],[1,"block-grid"],[1,"header-row",2,"display","grid","grid-template-columns","repeat(7, 1fr)"],["class","header-cal",4,"ngFor","ngForOf"],[1,"calendar-body",2,"display","grid","grid-template-columns","repeat(7, 1fr)"],["class","day",3,"ngClass","click",4,"ngFor","ngForOf"],["class","selected-workouts",4,"ngIf"],[1,"header-cal"],[1,"day",3,"ngClass","click"],[1,"selected-workouts"],["class","workout-entry",3,"click",4,"ngFor","ngForOf"],[1,"workout-entry",3,"click"],[1,"workout-name"],[1,"edit-icon","fas"],[1,"workout-date"]],template:function(r,o){1&r&&e.YNc(0,T,18,5,"div",0),2&r&&e.Q6J("ngIf",!o.isLoading)},dependencies:[d.mk,d.sg,d.O5,d.uU],styles:[".heading-circle[_ngcontent-%COMP%]{width:25px;height:25px;background-color:#2f73fe;color:#fff;text-align:center;vertical-align:middle;border-radius:50%;line-height:25px;font-size:16px;font-weight:700;margin-bottom:20px}.heading[_ngcontent-%COMP%]{color:#2f73fe;font-weight:700;font-size:16px;margin-bottom:20px;padding:20px}.header-cal[_ngcontent-%COMP%]{color:#1f255e;text-align:center;padding:20px;font-weight:700;margin-bottom:40px}.day[_ngcontent-%COMP%]{text-align:center;padding:20px;margin:5px;font-weight:700;border-radius:50%}.today[_ngcontent-%COMP%]{margin:5px;background-color:#2f73fe;color:#fff;border-radius:50%}.highlighted-date[_ngcontent-%COMP%]{margin:5px;color:#000;background-color:#ffc107;border-radius:50%}.otherMonth[_ngcontent-%COMP%]{color:#aaa;margin:5px}.selected[_ngcontent-%COMP%]{margin:5px;color:#000;background-color:#90ee90}"]})}return i})();const W=[{path:"routine-check",component:O}];let D=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=e.oAB({type:i});static#r=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(W),l.Bz]})}return i})(),Z=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=e.oAB({type:i});static#r=this.\u0275inj=e.cJS({imports:[d.ez,f.UX,D]})}return i})();var F=c(9957);let U=(()=>{class i{constructor(t,r){this.route=t,this.router=r}ngOnInit(){}onNewWorkout(){this.router.navigate(["new-workout"],{relativeTo:this.route,queryParams:{newWorkout:!0}})}static#t=this.\u0275fac=function(r){return new(r||i)(e.Y36(l.gz),e.Y36(l.F0))};static#e=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-workout"]],decls:2,vars:0,consts:[["marginTop","10",1,"button",3,"click"]],template:function(r,o){1&r&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return o.onNewWorkout()}),e._uU(1,"Start a workout!"),e.qZA())}})}return i})(),A=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-3"],[1,"col-sm-6"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"app-workout")(4,"app-routine-check"),e.qZA(),e._UZ(5,"div",1),e.qZA())},dependencies:[O,U]})}return i})(),E=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=e.oAB({type:i});static#r=this.\u0275inj=e.cJS({imports:[Z,F.WorkoutModule,f.UX,l.Bz,l.Bz.forChild([{path:"",component:A}])]})}return i})()}}]);